# ########################### 不可修改：硬件与固件格式适配 ###########################
# 小米4A千兆版 MT7621 架构精准适配（修改会导致固件无法刷入/运行）
CONFIG_TARGET_ramips=y
CONFIG_TARGET_ramips_mt7621=y
CONFIG_TARGET_ramips_mt7621_DEVICE_xiaomi_mi-router-4a-gigabit=y

# squashfs 只读压缩格式（省空间、防系统文件损坏，适配16MB闪存）
CONFIG_TARGET_ROOTFS_SQUASHFS=y
CONFIG_SQUASHFS_COMPRESSION_GZIP=y

# ########################### 最小化：基础系统组件（仅保留必备，缺一不可） ###########################
CONFIG_PACKAGE_base-files=y
CONFIG_PACKAGE_busybox=y
CONFIG_PACKAGE_dnsmasq=y
CONFIG_PACKAGE_dropbear=y
CONFIG_PACKAGE_firewall=y
CONFIG_PACKAGE/fstools=y
CONFIG_PACKAGE/kernel=y
CONFIG_PACKAGE_libc=y
CONFIG_PACKAGE_libgcc=y
CONFIG_PACKAGE/logd=y
CONFIG_PACKAGE/mtd=y
CONFIG_PACKAGE/netifd=y
CONFIG_PACKAGE/opkg=y
CONFIG_PACKAGE/ppp=y
CONFIG_PACKAGE/ppp-mod-pppoe=y
CONFIG_PACKAGE/swconfig=y
CONFIG_PACKAGE/uboot-envtools=y
CONFIG_PACKAGE/uhttpd=y
CONFIG_PACKAGE/wireless-tools=y
CONFIG_PACKAGE/wpa-supplicant=y

# ########################### 精简版：LuCI 核心（无冗余模块，仅满足网页管理） ###########################
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-compat=y
CONFIG_PACKAGE_luci-lib-base=y
CONFIG_PACKAGE_luci-lib-ip=y
CONFIG_PACKAGE_luci-lib-jsonc=y
CONFIG_PACKAGE_luci-lib-nixio=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-mod-network=y
CONFIG_PACKAGE_luci-mod-status=y
CONFIG_PACKAGE_luci-mod-system=y
CONFIG_PACKAGE_luci-theme-bootstrap=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y

# ########################### 核心功能：V2Ray （仅保留核心，满足OpenClash依赖+基础代理） ###########################
CONFIG_PACKAGE_v2ray-core=y
CONFIG_PACKAGE_v2ray-geoip=y
CONFIG_PACKAGE_v2ray-geosite=y

# ########################### 核心功能：OpenClash （自带策略路由，无额外依赖） ###########################
CONFIG_PACKAGE_luci-app-openclash=y
CONFIG_PACKAGE_luci-i18n-openclash-zh-cn=y
CONFIG_PACKAGE_openclash-core=y
CONFIG_PACKAGE_openclash-geoip=y
CONFIG_PACKAGE_openclash-geosite=y
CONFIG_PACKAGE_openclash-rules=y

# ########################### 仅保留：必备调试/更新工具（仅wget，无其他冗余工具） ###########################
CONFIG_PACKAGE_wget=y

# ########################### 关键：强制关闭所有冗余组件（杜绝冲突，节省空间） ###########################
# 关闭代理类冲突插件
CONFIG_PACKAGE_luci-app-ssr-plus=n
CONFIG_PACKAGE_luci-i18n-ssr-plus-zh-cn=n
CONFIG_PACKAGE_shadowsocks-libev=n
CONFIG_PACKAGE_v2ray-plugin=n

# 关闭非必要工具插件
CONFIG_PACKAGE_luci-app-accesscontrol=n
CONFIG_PACKAGE_luci-app-ddns=n
CONFIG_PACKAGE_luci-app-nlbwmon=n
CONFIG_PACKAGE_luci-app-pbr=n
CONFIG_PACKAGE_luci-app-samba=n
CONFIG_PACKAGE_luci-app-upnp=n
CONFIG_PACKAGE_luci-app-wol=n
CONFIG_PACKAGE_luci-i18n-accesscontrol-zh-cn=n
CONFIG_PACKAGE_luci-i18n-ddns-zh-cn=n
CONFIG_PACKAGE_luci-i18n-nlbwmon-zh-cn=n
CONFIG_PACKAGE_luci-i18n-pbr-zh-cn=n
CONFIG_PACKAGE_luci-i18n-wol-zh-cn=n

# 关闭冗余内核模块与库文件
CONFIG_PACKAGE_kmod-gpio-button-hotplug=n
CONFIG_PACKAGE_kmod-leds-gpio=n
CONFIG_PACKAGE_kmod-mt7603=n
CONFIG_PACKAGE_kmod-iptables-mod-proxy=n
CONFIG_PACKAGE_kmod-nf-nathelper-extra=n
CONFIG_PACKAGE_libev=n
CONFIG_PACKAGE_libsodium=n
CONFIG_PACKAGE_unbound=n

# 关闭其他无用组件
CONFIG_PACKAGE_telnet=n
CONFIG_PACKAGE_netcat=n
CONFIG_PACKAGE_traceroute=n
